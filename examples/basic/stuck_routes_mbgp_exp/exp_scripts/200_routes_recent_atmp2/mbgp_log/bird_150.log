MBGP Successfully added channel for MBGPMBGP Successfully added channel for MBGPInitialized local_ip: 10.100.0.150
Initialized remote_ip: 10.100.0.149
Welcome to C++, using IP1: 10.100.0.150 and IP2: 10.100.0.149
Created ips_pair with local_ip: 10.100.0.150 and remote_ip: 10.100.0.149
Debug: ips pair addresses are -> local_ip: 10.100.0.150, remote_ip: 10.100.0.149Initialized local_ip: 10.100.0.150
Initialized remote_ip: 10.100.0.151
Welcome to C++, using IP1: 10.100.0.150 and IP2: 
I'm in mbgp_rx
local_ip: 10.100.0.150
remote_ip: 10.100.0.149
10.100.0.151
Created ips_pair with local_ip: 10.100.0.150 and remote_ip: 10.100.0.151
Server address: 10.100.0.150:50051
Debug: ips pair addresses are -> local_ip: 10.100.0.150, remote_ip: 10.100.0.151
I'm in mbgp_rx
local_ip: 10.100.0.150
remote_ip: 10.100.0.151
Server address: 10.100.0.150:50051
Server listening on 10.100.0.150:50051
Server listening on 10.100.0.150:50051
Initialized local_ip: 10.100.0.150
Initialized remote_ip: 10.100.0.149
C++ Cheching peer server at remote IP10.100.0.149at from local IP: 10.100.0.150
Created ips_pair with local_ip: 10.100.0.150 and remote_ip: 10.100.0.149
MBGP: I'm in mbgp_rt_notify
------------- MBGP: I'm in mbgp_rt_notify -- NEW ROUTE 
[C-ENCODE-START][1745098029] Starting to encode route 10.150.0.0/24
[C-CONNECTION-STATUS][1745098029] Not connected, storing route for later
[C-INFO][1745098029] Connection not established, storing route update to 10.150.0.0/24 for later
Initialized local_ip: 10.100.0.150
Initialized remote_ip: 10.100.0.151
C++ Cheching peer server at remote IP10.100.0.151at from local IP: 10.100.0.150
Created ips_pair with local_ip: 10.100.0.150 and remote_ip: 10.100.0.151
MBGP: I'm in mbgp_rt_notify
------------- MBGP: I'm in mbgp_rt_notify -- NEW ROUTE 
[C-ENCODE-START][1745098029] Starting to encode route 10.150.0.0/24
[C-CONNECTION-STATUS][1745098029] Not connected, storing route for later
[C-INFO][1745098029] Connection not established, storing route update to 10.150.0.0/24 for later
[TIMESTAMP: 1745098029628 ms] ASYNC SERVER: Processing status request
[TIMESTAMP: 1745098029628 ms] ASYNC SERVER: Processing status request
[TIMESTAMP: 1745098029629 ms] Server is up
[TIMESTAMP: 1745098029629 ms] Router B is up.
[C-STATUS-UPDATE-START][1745098029] Starting protocol status update for 10.100.0.151
[C][1745098029] MBGP instance with remote IP 10.100.0.151 found
[C-STATUS-DIRECT-UPDATE][1745098029] Directly updating connection status
[C-CONNECTION-STATUS-UPDATED][1745098029] Connection status set to CONNECTED
[C-PROCESSING-STORED-ROUTES][1745098029] Processing stored routes
[C-STORED-ROUTES-START][1745098029] Starting to process stored routes
[C-STORED-ROUTE][1745098029] Processing stored route with update type UPDATE
[C-BATCH-LOCK-STORED][1745098029] Locking batch mutex for stored route
[C-BATCH-UNLOCK-STORED][1745098029] Batch mutex unlocked
[C-STORED-ROUTES-END][1745098029] Completed processing all stored routes
[C-FORCE-PROCESS-BATCH][1745098029] Force processing batch after status update
=== SENDING BATCH OF 1 ROUTES ===
Route 1: Prefix: 10.150.0.0/24, Next Hop: 10.100.0.150, Update Type: UPDATE
  AS Path: 150 
=== END OF BATCH ===

[C-DEBUG][1745098029] Direct call to C++ with batch of 1 routes
[CPP-CONNECTOR-DEBUG][1745098029] Received batch request from C with 1 routes
[TIMESTAMP: 1745098029629 ms] Server is up
[TIMESTAMP: 1745098029629 ms] Router B is up.
[C-STATUS-UPDATE-START][1745098029] Starting protocol status update for 10.100.0.149
[C][1745098029] MBGP instance with remote IP 10.100.0.149 found
[C-STATUS-DIRECT-UPDATE][1745098029] Directly updating connection status
[C-CONNECTION-STATUS-UPDATED][1745098029] Connection status set to CONNECTED
[C-PROCESSING-STORED-ROUTES][1745098029] Processing stored routes
[C-STORED-ROUTES-START][1745098029] Starting to process stored routes
[C-STORED-ROUTE][1745098029] Processing stored route with update type UPDATE
[C-BATCH-LOCK-STORED][1745098029] Locking batch mutex for stored route
[C-BATCH-UNLOCK-STORED][1745098029] Batch mutex unlocked
[C-STORED-ROUTES-END][1745098029] Completed processing all stored routes
[C-FORCE-PROCESS-BATCH][1745098029] Force processing batch after status update
=== SENDING BATCH OF 1 ROUTES ===
Route 1: Prefix: 10.150.0.0/24, Next Hop: 10.100.0.150, Update Type: UPDATE
  AS Path: 150 
=== END OF BATCH ===

[C-DEBUG][1745098029] Direct call to C++ with batch of 1 routes
[CPP-CONNECTOR-DEBUG][1745098029] Received batch request from C with 1 routes
[TIMESTAMP: 1745098029629 ms] BATCH REQUEST: Preparing to send 1 routes
[C-STORED-ROUTES-PROCESSED][1745098029] Completed processing stored routes
[C-STATUS-UPDATE-END][1745098029] Finished protocol status update
[TIMESTAMP: 1745098029629 ms] BATCH REQUEST: Preparing to send 1 routes
[TIMESTAMP: 1745098029629 ms] ASYNC TX: Beginning transmission of batch with 1 routes
Client attempting to connect to 10.100.0.149:50051 to send batch of 1 routes
BATCH DATA CHECK: 
Route 0: Prefix=10.150.0.0/24, Next-hop=10.100.0.150, Type=UPDATE, Remote IP=10.100.0.149
[CPP-CLIENT-DEBUG][1745098029] Starting client batch processing for 1 routes
[C-STORED-ROUTES-PROCESSED][1745098029] Completed processing stored routes
[C-STATUS-UPDATE-END][1745098029] Finished protocol status update
[TIMESTAMP: 1745098029629 ms] ASYNC TX: Beginning transmission of batch with 1 routes
Client attempting to connect to 10.100.0.151:50051 to send batch of 1 routes
BATCH DATA CHECK: 
Route 0: Prefix=10.150.0.0/24, Next-hop=10.100.0.150, Type=UPDATE, Remote IP=10.100.0.151
[CPP-CLIENT-DEBUG][1745098029] Starting client batch processing for 1 routes
[TIMESTAMP: 1745098029649 ms] Server is up
No active stream, establishing a new one...
Waiting for batch stream to become ready...
Creating bidirectional stream...
[TIMESTAMP: 1745098029649 ms] Server is up
No active stream, establishing a new one...
Waiting for batch stream to become ready...
Creating bidirectional stream...
Bidirectional stream created successfully
[TIMESTAMP: 1745098029649 ms] ASYNC SERVER: Processing status request
Batch stream established, will remain active for 300 seconds of inactivity
Bidirectional stream created successfullyBatch reader thread started

Batch stream is ready for sending data
Preparing to send batch with 1 routes:
  Route 0: Prefix=10.150.0.0/24, Next-hop=10.100.0.150, Type=UPDATE, Origin=0
[TIMESTAMP: 1745098029650 ms] ASYNC CLIENT: Sending batch with 1 routes via stream
Batch stream established, will remain active for 300 seconds of inactivity
Batch reader thread started
Batch stream is ready for sending data
Preparing to send batch with Successfully wrote 1 routes:
  Route 0: Prefix=10.150.0.0/24, Next-hop=10.100.0.150, Type=UPDATE, Origin=0
1 routes to stream
[TIMESTAMP: 1745098029650 ms] ASYNC CLIENT: Sending batch with 1 routes via stream
Successfully sent batch of 1 routes
Successfully wrote 1 routes to stream
Successfully sent batch of 1 routes
[TIMESTAMP: 1745098029650 ms] ASYNC TX: Completed transmission of batch with 1 routes
[TIMESTAMP: 1745098029650 ms] ASYNC TX: Completed transmission of batch with 1 routes
[TIMESTAMP: 1745098029660 ms] ASYNC SERVER: Processing status request
Received batch response: Received batch response: Batch processing startedBatch processing started, processed: , processed: [Server] New batch streaming connection established from 10.100.0.149
1 routes
[CPP-CLIENT-DEBUG][1745098029] Received confirmation of batch processing, client work complete
1 routes
[CPP-CLIENT-DEBUG][1745098029] Received confirmation of batch processing, client work complete
[Server] Registered new stream with tag 0x7cf24800cdc0
[Server] New batch streaming connection established from 10.100.0.151
[Server] Registered new stream with tag 0x7cf248010e40
[TIMESTAMP: 1745098029712 ms] ASYNC SERVER: Processing batch stream request 1 with 1 routes
[Server] Processing batch stream request 1 from 10.100.0.149 with 1 routes
[CPP-SERVER-DEBUG][1745098029] Server received batch stream request with 1 routes
[CPP-SERVER-DEBUG][1745098029] Spawned thread to process batch, returning control
[TIMESTAMP: 1745098029713 ms] ASYNC PROCESSING: Starting to process batch of 1 routes
Received batch with 1 routes from C++
Route 1: Prefix: 10.149.0.0/24, Next Hop: 10.100.0.149, Origin: 0, Update Type: UPDATE
  AS Path: 149 
[CPP-CONNECTOR-DEBUG][1745098029] Completed processing batch, returning to C
[C-DECODE-BATCH-START][1745098029] Starting to decode batch at timestamp: 1745098029713 ms
[C][1745098029] MBGP instance with remote IP 10.100.0.149 found
[C-PROCESS-ROUTE][1745098029] Processing route 1/1
Attempting to enqueue route: 10.149.0.0/24 for protocol instance: x_as149
Enqueued route with prefix: 10.149.0.0/24 for protocol instance: x_as149
[C-ROUTE-QUEUED][1745098029] Route 1 queued in 0 ms
[C-SCHEDULE][1745098029] Scheduling immediate route processing
[C-BATCH-COMPLETE][1745098029] Batch processing completed in 0 ms
[TIMESTAMP: 1745098029713 ms] ASYNC PROCESSING: Completed processing batch of 1 routes
[TIMESTAMP: 1745098029723 ms] ASYNC SERVER: Processing batch stream request 2 with 1 routes
[Server] Processing batch stream request 2 from 10.100.0.151 with 1 routes
[CPP-SERVER-DEBUG][1745098029] Server received batch stream request with 1 routes
[CPP-SERVER-DEBUG][1745098029] Spawned thread to process batch, returning control
[TIMESTAMP: 1745098029723 ms] ASYNC PROCESSING: Starting to process batch of 1 routes
Received batch with 1 routes from C++
Route 1: Prefix: 10.151.0.0/24, Next Hop: 10.100.0.151, Origin: 0, Update Type: UPDATE
  AS Path: 151 
[CPP-CONNECTOR-DEBUG][1745098029] Completed processing batch, returning to C
[C-DECODE-BATCH-START][1745098029] Starting to decode batch at timestamp: 1745098029724 ms
[C][1745098029] MBGP instance with remote IP 10.100.0.151 found
[C-PROCESS-ROUTE][1745098029] Processing route 1/1
Attempting to enqueue route: 10.151.0.0/24 for protocol instance: x_as151
Enqueued route with prefix: 10.151.0.0/24 for protocol instance: x_as151
[C-ROUTE-QUEUED][1745098029] Route 1 queued in 0 ms
[C-SCHEDULE][1745098029] Scheduling immediate route processing
[C-BATCH-COMPLETE][1745098029] Batch processing completed in 0 ms
[TIMESTAMP: 1745098029724 ms] ASYNC PROCESSING: Completed processing batch of 1 routes
