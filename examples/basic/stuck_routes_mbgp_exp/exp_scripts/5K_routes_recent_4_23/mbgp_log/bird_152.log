MBGP Successfully added channel for MBGPRoute queue is empty for protocol instance: x_as151
Initialized local_ip: 10.100.0.152
Initialized remote_ip: 10.100.0.151
Welcome to C++, using IP1: 10.100.0.152 and IP2: 10.100.0.151
Created ips_pair with local_ip: 10.100.0.152 and remote_ip: 10.100.0.151
Debug: ips pair addresses are -> local_ip: 10.100.0.152, remote_ip: 10.100.0.151
I'm in mbgp_rx
local_ip: 10.100.0.152
remote_ip: 10.100.0.151
Server address: 10.100.0.152:50051
Server listening on 10.100.0.152:50051
Initialized local_ip: 10.100.0.152
Initialized remote_ip: 10.100.0.151
C++ Cheching peer server at remote IP10.100.0.151at from local IP: 10.100.0.152
Created ips_pair with local_ip: 10.100.0.152 and remote_ip: 10.100.0.151
MBGP: I'm in mbgp_rt_notify
------------- MBGP: I'm in mbgp_rt_notify -- NEW ROUTE 
[C-ENCODE-START][1745272356] Starting to encode route 10.152.0.0/24
[C-CONNECTION-STATUS][1745272356] Not connected, storing route for later
[C-INFO][1745272356] Connection not established, storing route update to 10.152.0.0/24 for later
[TIMESTAMP: 1745272356196 ms] ASYNC SERVER: Processing status request
[TIMESTAMP: 1745272356199 ms] Server is up
[TIMESTAMP: 1745272356199 ms] Router B is up.
[C-STATUS-UPDATE-START][1745272356] Starting protocol status update for 10.100.0.151
[C][1745272356] MBGP instance with remote IP 10.100.0.151 found
[C-STATUS-DIRECT-UPDATE][1745272356] Directly updating connection status
[C-CONNECTION-STATUS-UPDATED][1745272356] Connection status set to CONNECTED
[C-PROCESSING-STORED-ROUTES][1745272356] Processing stored routes
[C-STORED-ROUTES-START][1745272356] Starting to process stored routes
[C-STORED-ROUTE][1745272356] Processing stored route with update type UPDATE
[C-BATCH-LOCK-STORED][1745272356] Locking batch mutex for stored route
[C-BATCH-UNLOCK-STORED][1745272356] Batch mutex unlocked
[C-STORED-ROUTES-END][1745272356] Completed processing all stored routes
[C-FORCE-PROCESS-BATCH][1745272356] Force processing batch after status update
=== SENDING BATCH OF 1 ROUTES ===
Route 1: Prefix: 10.152.0.0/24, Next Hop: 10.100.0.152, Update Type: UPDATE
  AS Path: 152 
=== END OF BATCH ===

[C-DEBUG][1745272356] Direct call to C++ with batch of 1 routes
[CPP-CONNECTOR-DEBUG][1745272356] Received batch request from C with 1 routes
[TIMESTAMP: 1745272356199 ms] BATCH REQUEST: Preparing to send 1 routes
[C-STORED-ROUTES-PROCESSED][1745272356] Completed processing stored routes
[C-STATUS-UPDATE-END][1745272356] Finished protocol status update
[TIMESTAMP: 1745272356200 ms] ASYNC TX: Beginning transmission of batch with 0 routes
Client attempting to connect to 10.100.0.151:50051 to send batch of 0 routes
BATCH DATA CHECK: 
[CPP-CLIENT-DEBUG][1745272356] Starting client batch processing for 0 routes
[TIMESTAMP: 1745272356216 ms] ASYNC SERVER: Processing status request
[TIMESTAMP: 1745272356220 ms] Server is up
No active stream, establishing a new one...
Waiting for batch stream to become ready...
Creating bidirectional stream...
Bidirectional stream created successfully
Batch stream established, will remain active for 300 seconds of inactivity
Batch reader thread started
Batch stream is ready for sending data
Sending batch #1 with 0 routes
[TIMESTAMP: 1745272356220 ms] ASYNC CLIENT: Sending batch with 0 routes via stream (attempt 1)
Successfully wrote 0 routes to stream
Successfully sent batch #1 with 0 routes
[TIMESTAMP: 1745272356221 ms] ASYNC TX: Completed transmission of batch #1 with 0 routes (success=true)
[Server] New batch streaming connection established from 10.100.0.151
[Server] Registered new stream with tag 0x71810c00cdc0
[TIMESTAMP: 1745272356247 ms] ASYNC SERVER: Processing batch stream request 1 with 0 routes
[Server] Processing batch stream request 1 from 10.100.0.151 with 0 routes
[CPP-SERVER-DEBUG][1745272356] Server received batch stream request with 0 routes
[CPP-SERVER-DEBUG][1745272356] Spawned thread to process batch, returning control
Error: Invalid batch data to process!
Received batch response: Batch processing started, processed: 0 routes
[CPP-CLIENT-DEBUG][1745272356] Received confirmation of batch processing, client work complete
